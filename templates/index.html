<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ì§¤ë°©ëª»ìƒì–´</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
          integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
          crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://unpkg.com/@kfonts/neodgm-code/index.css"/>
    <!-- Fa solid icon ì ìš© cDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
          integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <!-- Jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>

    <script>
        // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ëˆ„ë¥¼ ì‹œ ë¡œê·¸ì•„ì›ƒ
        function logout() {
            console.log()
            $.removeCookie('mytoken', {path: '/'})
            // alert('ë¡œê·¸ì•„ì›ƒ!')
            window.location.href = "/"
        }

        // ì§¤ ëª¨ë‹¬ ì‹œì‘
        $(document).on("click", "#upload-zzal", function (e) {
            // input text ë€ì— ê¸€ì´ ë‚¨ì•„ ìˆìŒ
            // ì‚­ì œ í•˜ê¸° ìœ„í•´ ê³µë°±ìœ¼ë¡œ ë„ì›€
            $(".urlhere").val('');
            // ìŠ¤í¬ë¡¤ ë°©ì§€
            $('body').css('overflow', 'hidden');
            // modal show
            $(".modal").fadeIn();
        });

        // ì™¸ë¶€ì˜ì—­ í´ë¦­ ì‹œ íŒì—… ë‹«ê¸°
        $(document).mouseup(function (e) {
            // ì „ì²´ ëª¨ë‹¬ ì˜ì—­ì„ ì¡ì•„ì„œ
            let LayerPopup = $(".modal");
            // íƒ€ê²Ÿì˜ ê¸¸ì´ë¥¼ ê°€ì§€ì§€ ì•Šì„ë•Œì¸ë°
            // ê³µë¶€í•  í•„ìš”ê°€ ìˆìŒ
            if (LayerPopup.has(e.target).length === 0) {
                $(".modal").fadeOut();
                $('body').css('overflow', 'visible');
            }
        });
        // ì§¤ ì˜¬ë¦¬ê¸° ë

        // ì§¤ì˜¬ë¦¬ê¸° URL upload
        // OK ë²„íŠ¼ì´ ëˆŒë¦¬ê³  input textê°€ ê³µë°±ì´ ì•„ë‹ ë•Œ POST ìš”ì²­
        function upload_url() {
            // input textì—ì„œ ê°’ì„ ê°€ì ¸ì˜´
            let upload_url = $('#upload_url').val();
            let upload_tag = $('#upload_tag').val();

            // URL ê³µë°±ì´ ì•„ë‹ë•Œë§Œ POST ìš”ì²­ì„ ë³´ëƒ„
            if (upload_url != "") {
                $.ajax({
                    type: "POST",
                    url: "/upload",
                    data: {
                        url_give: upload_url,
                        tag_give: upload_tag
                    },
                    success: function (response) {
                        alert("ì—…ë¡œë“œ ì™„ë£Œ")
                        window.location.replace("/")
                    }
                })
            }
            //
            $(".modal").fadeOut();
        }

        // URL ë€, tagë€ í´ë¦­ì‹œ ìŠ¤í¬ë¡¤ ë°©ì‹œ
        function scroll_off() {
            $('body').css('overflow', 'hidden');
        }

        // ìƒì„¸ì •ë³´ ëª¨ë‹¬ ì‹œì‘
        $(document).on("click", ".zzal", function (e) {
            // í´ë¦­í•œ imgì˜ srcë¥¼ ê°€ì ¸ì™€ì„œ
            // src ì†ì„±ì— ë„£ì–´ì£¼ê¸°
            let img = $('.zzal').attr("src");
            $('.upload-img').attr("src", img);
            $(".modal-info").fadeIn();
            // ìŠ¤í¬ë¡¤ ê°€ë¦¬ê¸°
            $('body').css('overflow', 'hidden');
        });
        $(document).mouseup(function (e) {
            let LayerPopup = $(".modal-info");
            if (LayerPopup.has(e.target).length === 0) {
                $('body').css('overflow', 'visible');
                $(".modal-info").fadeOut();
            }
        });
    </script>
</head>
<body>
<!-- Navbar -->
<div class="navbar">
    <div class="container flex">
        <a href="/" class="logo">ì§¤ë°©ëª»ìƒì–´</a>
        <div class="navbar-links">
            <ul>
                <li><a id="upload-zzal">ì§¤ì˜¬ë¦¬ê¸°</a></li>
                <li><a href=/posts/mine>Myì§¤</a></li>
                {% if login_status == 0 %}
                    <li><a href=/log>ë¡œê·¸ì¸</a></li>
                    <li><a href=/join>íšŒì›ê°€ì…</a></li>
                {% elif login_status == 1 %}
                    <li><a href=/editprofile>{{ user_info.id }} ë‹˜</a></li>
                    <li><a onclick="logout()">ë¡œê·¸ì•„ì›ƒ</a></li>
                {% endif %}
            </ul>
        </div>
    </div>
</div>
<!--main page -->
<section class="container main">
    <!--tagbox -->
    <div class="tagbox">
        <div class="tag">#ì§±êµ¬</div>
        <div class="tag">#ë¬´í•œë„ì „</div>
        <div class="tag">#í‡´ì‚¬ê°</div>
        <div class="tag">#meme</div>
        <div class="tag">#ë™ë¬¼ì§¤</div>
        <div class="tag">#ì»¤ë°‹</div>
        <div class="tag">#ë°°ê³ íŒŒ</div>
    </div>

    <div class="search">
        <input class="taghere" type="text" id="" placeholder="ì§¤ê²€ìƒ‰í•˜ê¸°!">
        <i class="fas fa-search" id="" onclick=""></i>
    </div>

    <div class="grid">
        {% for i in range(4) %}
            <div class="line">
                {% for post in posts[i] %}
                    <div class="imgwrapper" onclick="">
                        <img class="zzal" src="{{ post.url }}">
                        <div class="tagposition">
                            <div class="imgtagbox" id="">
                                {% for tag in post.tag %}
                                    <button class="imgtag" id="">{{ tag }}</button>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}
    </div>
</section>
<!-- ìƒì„¸ì •ë³´ ëª¨ë‹¬ HTML-->
<div class="modal-info">
    <div class="modal-info-content">
        <div class="modal-info-none-tag-items">
            <div class="modal-info-icons">
                <div class="leftside">
                    <p class="clicknum"> ì¡°íšŒìˆ˜: </p>
                </div>
                <div class="rightside">
                    <i class="fa-solid fa-heart"></i>
                    <i class="fa-regular fa-heart"></i>
                    <i class="fa-solid fa-upload"></i>
                </div>
            </div>
            <div class="modal-info-img">
                <img class="upload-img" src="">
            </div>
            <!--modaltagì™€ tagëŠ” classê°€ ë‹¤ë¦…ë‹ˆë‹¤! -->
            <div class="modal-info-tagbox">
                <div class="modaltag">#ì§±êµ¬</div>
                <div class="modaltag">#í°ë‘¥ì´</div>
                <div class="modaltag">#ì§‘ì—ê°ˆë˜</div>
                <div class="modaltag">#í‡´ì‚¬</div>
                <div class="modaltag">#ì§±êµ¬</div>
                <div class="modaltag">#í°ë‘¥ì´</div>
            </div>
        </div>
    </div>
</div>
<!-- ì§¤ ì˜¬ë¦¬ê¸° ëª¨ë‹¬ HTML -->
<div class="modal">
    <div class="modal_content"
         title="">
        <div class="modal-title">ì§¤ ì˜¬ë¦¬ê¸°</div>
        <div class="modal-url">
            <input onclick="scroll_off()" class="urlhere" type="text" id="upload_url" placeholder="URL ì…ë ¥">
            <!--<i class="fa-solid fa-upload"></i>-->
            <input onclick="scroll_off()" class="urlhere" type="text" id="upload_tag" placeholder="íƒœê·¸">
        </div>
        <div class="modal-btns">
            <button class="upload_ok" onclick="upload_url()">OK</button>
            <p>íƒœê·¸ êµ¬ë¶„ì€ ì‰¼ë£Œë¡œ í•´ì£¼ì„¸ìš”.</p>
            <p>ğŸ‘‰ ì˜ˆì‹œ: ì§¤ë°©, ëª»ìƒì–´ ğŸ‘ˆ</p>
        </div>
    </div>
</div>


<section class="footer">
    <div class="container">
        <h3>Dev Team C-3</h3>
        <p>&#128073 ì´ë™ì¬ ê¹€ë¯¼ìˆ˜ í•œì§€ìš© ê¶Œì§€ì€ &#128072 </p>
    </div>
</section>
</body>
</html>